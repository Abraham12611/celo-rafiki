import { ContractKit } from '@celo/contractkit';
import { AuthenticationMethod, CombinerEndpoint, DomainEndpoint, DomainRequest, DomainRequestHeader, DomainResponse, OdisRequest, OdisRequestHeader, OdisResponse, PhoneNumberPrivacyRequest, signWithRawKey } from '@celo/phone-number-privacy-common';
import * as t from 'io-ts';
export interface WalletKeySigner {
    authenticationMethod: AuthenticationMethod.WALLET_KEY;
    contractKit: ContractKit;
}
export interface EncryptionKeySigner {
    authenticationMethod: AuthenticationMethod.ENCRYPTION_KEY;
    rawKey: string;
}
export type AuthSigner = WalletKeySigner | EncryptionKeySigner;
export { AuthenticationMethod, PhoneNumberPrivacyRequest, signWithRawKey };
export declare enum ErrorMessages {
    ODIS_QUOTA_ERROR = "odisQuotaError",
    ODIS_RATE_LIMIT_ERROR = "odisRateLimitError",
    ODIS_INPUT_ERROR = "odisBadInputError",
    ODIS_AUTH_ERROR = "odisAuthError",
    ODIS_CLIENT_ERROR = "Unknown Client Error",
    ODIS_FETCH_ERROR = "odisFetchError",
    ODIS_RESPONSE_ERROR = "odisResponseError"
}
export interface ServiceContext {
    odisUrl: string;
    odisPubKey: string;
}
export declare const ODIS_STAGING_CONTEXT: ServiceContext;
export declare const ODIS_ALFAJORES_CONTEXT_PNP: ServiceContext;
export declare const ODIS_ALFAJORES_CONTEXT_DOMAINS: ServiceContext;
export declare const ODIS_MAINNET_CONTEXT_PNP: ServiceContext;
export declare const ODIS_MAINNET_CONTEXT_DOMAINS: ServiceContext;
export declare enum OdisAPI {
    PNP = "pnp",
    DOMAIN = "domain"
}
export declare enum OdisContextName {
    STAGING = "alfajoresstaging",
    ALFAJORES = "alfajores",
    MAINNET = "mainnet"
}
export declare function getServiceContext(contextName?: OdisContextName, api?: OdisAPI): ServiceContext;
export declare function signWithDEK(msg: string, signer: EncryptionKeySigner): string;
export declare function getOdisPnpRequestAuth(body: PhoneNumberPrivacyRequest, signer: AuthSigner): Promise<string>;
/**
 * Send any OdisRequest to the specified CombinerEndpoint for the given ServiceContext
 *
 * @param body OdisRequest to send in the body of the HTTP request.
 * @param context Contains service URL and public to determine which instance to contact.
 * @param endpoint Endpoint to query
 * @param responseSchema io-ts schema to ensure type safety of responses
 * @param headers custom request headers corresponding to the type of OdisRequest (keyVersion, Authentication, etc.)
 */
export declare function queryOdis<R extends OdisRequest>(body: R, context: ServiceContext, endpoint: CombinerEndpoint, responseSchema: t.Type<OdisResponse<R>, OdisResponse<R>, unknown>, headers: OdisRequestHeader<R>, abortController?: AbortController): Promise<OdisResponse<R>>;
/**
 * Send the given domain request to ODIS (e.g. to get a POPRF evaluation or check quota).
 *
 * @param body Request to send in the body of the HTTP request.
 * @param context Contains service URL and public to determine which instance to contact.
 * @param endpoint Endpoint to query (e.g. '/domain/sign', '/domain/quotaStatus').
 * @param responseSchema io-ts type for the expected response type. Provided to ensure type safety.
 * @param headers optional header fields relevant to the given request type (keyVersion, Authentication, etc.)
 */
export declare function sendOdisDomainRequest<R extends DomainRequest>(body: R, context: ServiceContext, endpoint: DomainEndpoint, responseSchema: t.Type<OdisResponse<R>>, headers?: DomainRequestHeader<R>): Promise<DomainResponse<R>>;
